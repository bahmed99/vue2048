image: node:latest

before_script:
  - curl -f https://get.pnpm.io./v6.16.js | node -add
  - pnpm config set store-dir .pnpm-store

stages:          
  - Installing-dependencies
  - Type-Checking
  - Static-Analyze
  - Build
  - Test



npm-installing:
  stage: Installing-dependencies
  script: 
   - pnpm install
   - echo "-------------------------- dependencies installed -----------------------------------------------------"


checking-type:
  stage: Type-Checking
  script:
   - pnpm type-check
   - echo "-------------------------- Vérification du typage statique du code terminée --------------------------"

lint-analyze:
  stage: Static-Analyze
  script:
    - pnpm lint 
    - echo "-------------------------- Analyse statique du code terminée -----------------------------------------"

building:
  stage: Build
  script:
    - pnpm build 
    - echo "-------------------------- Construction du "package" à déployer terminée -----------------------------"
  artifacts:
    paths:
      - build/index.html

testing:
  stage: Test
  script :
    - pnpm vitest
    - echo "-------------------------- Exécution des tests terminée ----------------------------------------------"
